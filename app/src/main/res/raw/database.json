{
  "database": "trade",
  "version": 1,
  "tables": [
    {
      "table": "options",
      "description": "Служебная таблица для хранения настроеек",
      "fields": [
        {
          "field": "o_id",
          "type": "integer",
          "description": "ID",
          "primary_key": true
        },
        {
          "field": "o_info",
          "type": "text",
          "description": "Информация об опции"
        },
        {
          "field": "o_data",
          "type": "text",
          "description": "Содержимое настройки в формате JSON"
        }
      ],
      "values": [
        {
          "o_id": 1,
          "o_info": "Сервер синхронизации",
          "o_data": "{\"BeginConnection\":\"Protocol\":\"ws\",\"Host\":\"pol-ice.ru\",\"Port\":8890,\"Path\":\"/ws\",\"Description\":\"Начальное подключение к серверу который отдаст параметры подключения к серверам синхронизации прописывается жестко в программе\"}"
        },
        {
          "o_id": 2,
          "o_info": "Авторизация",
          "o_data": "{\"FullName\": \"Гофман Роман\",\"Email\": \"roman@gofman.pro\",\"idToken\": \"gofman-1\",\"authData\": {\"login\": \"gofman\",\"password\": \"1\"}}"
        },
        {
          "o_id": 3,
          "o_info": "Геолокация",
          "o_data": "{\"mon\":{\"work\":true,\"t0\":\"8:00\",\"t1\":\"17:00\"},\"lm\":{\"minTime\":60000,\"minDistance\":0}}"
        }
      ]
    },
    {
      "table": "items",
      "description": "Справочник номенклатуры",
      "fields": [
        {
          "field": "i_id",
          "type": "integer",
          "description": "ID справочника номенклатуры",
          "primary_key": true
        },
        {
          "field": "i_name",
          "type": "text",
          "description": "Наименование номенклатуры"
        }
      ]
    },
    {
      "table": "item_group_types",
      "description": "Справочник типов группировок",
      "fields": [
        {
          "field": "igt_id",
          "type": "integer",
          "description": "ID",
          "primary_key": true
        },
        {
          "field": "igt_name",
          "type": "text",
          "description": "Значение"
        }
      ]
    },
    {
      "table": "item_groups",
      "description": "Справочник группировок",
      "fields": [
        {
          "field": "ig_id",
          "type": "integer",
          "description": "ID",
          "primary_key": true
        },
        {
          "field": "igt_id",
          "type": "integer",
          "description": "ID типа группировки"
        },
        {
          "field": "ig_name",
          "type": "text",
          "description": "Значение"
        }
      ]
    },
    {
      "table": "link_item_groups",
      "description": "Связи номенклатуры и групп",
      "fields": [
        {
          "field": "lig_id",
          "type": "integer",
          "description": "ID",
          "primary_key": true
        },{
          "field": "i_id",
          "type": "integer",
          "description": "Ссылка на номенклатуру"
        },
        {
          "field": "ig_id",
          "type": "integer",
          "description": "Ссылка на группу"
        },
        {
          "field": "igt_id",
          "type": "integer",
          "description": "Ссылка на тип группы"
        }
      ]
    },
    {
      "table": "item_unit_types",
      "description": "Справочник типов единиц измерения",
      "fields": [
        {
          "field": "iut_id",
          "type": "integer",
          "description": "ID",
          "primary_key": true
        },
        {
          "field": "iut_name",
          "type": "text",
          "description": "Значение"
        }
      ]
    },
    {
      "table": "item_units",
      "description": "Справочник значений единиц измерения",
      "fields": [
        {
          "field": "i_id",
          "type": "integer",
          "description": "ID номенклатуры"
        },
        {
          "field": "iut_id",
          "type": "integer",
          "description": "ID типы единиц измерения"
        },
        {
          "field": "iu_krat",
          "type": "integer",
          "description": "кратность"
        },
        {
          "field": "iu_num",
          "type": "integer",
          "description": "числитель"
        },
        {
          "field": "iu_denum",
          "type": "integer",
          "description": "знаменатель"
        },
        {
          "field": "iu_gros",
          "type": "integer",
          "description": "масса брутто в г"
        },
        {
          "field": "iu_net",
          "type": "integer",
          "description": "масса нетто в г"
        },
        {
          "field": "iu_length",
          "type": "integer",
          "description": "длина в мм"
        },
        {
          "field": "iu_width",
          "type": "integer",
          "description": "ширина в мм"
        },
        {
          "field": "iu_height",
          "type": "integer",
          "description": "высота в мм"
        },
        {
          "field": "iu_area",
          "type": "integer",
          "description": "площадь в мм:2"
        },
        {
          "field": "iu_volume",
          "type": "integer",
          "description": "объем (мм:3)"
        },
        {
          "field": "iu_base",
          "type": "boolean",
          "description": "признак базовой единицы измерения"
        },
        {
          "field": "iu_main",
          "type": "boolean",
          "description": "признак основной единицы измерения"
        }
      ]
    },
    {
      "table": "item_search",
      "fts3": true,
      "description": "Специальная таблица для поиска номенклатуры",
      "fields": [
          {
            "field": "i_id",
            "type": "integer",
            "description": "ID справочника номенклатуры",
            "primary_key": true
          },
          {
            "field": "value",
            "type": "text",
            "description": "Собранная строка для поиска"
          }
        ]
    },
    {
      "table": "countragents",
      "description": "Справочник контрагентов",
      "fields": [
        {
          "field": "ca_id",
          "type": "integer",
          "description": "ID контрагента",
          "primary_key": true
        },
        {
          "field": "ca_type",
          "type": "integer",
          "description": "Тип контрагента"
        },
        {
          "field": "ca_head",
          "type": "integer",
          "description": "Головная организация"
        },
        {
          "field": "ca_name",
          "type": "text",
          "description": "Рабочее наименование"
        },
        {
          "field": "ca_prn",
          "type": "text",
          "description": "Наименование для печати"
        },
        {
          "field": "ca_desc",
          "type": "text",
          "description": "Описание"
        },
        {
          "field": "ca_inn",
          "type": "text",
          "description": "ИНН"
        },
        {
          "field": "ca_kpp",
          "type": "text",
          "description": "КПП"
        },
        {
          "field": "ca_ogrn",
          "type": "text",
          "description": "ОГРН"
        }
      ]
    },
    {
      "table": "point_delivery",
      "description": "Точки доставки",
      "fields": [
        {
          "field": "pd_id",
          "type": "integer",
          "description": "ID точки",
          "primary_key": true
        },
        {
          "field": "pd_name",
          "type": "text",
          "description": "Рабочее наименование"
        },
        {
          "field": "pd_prn",
          "type": "text",
          "description": "Наименование для печати"
        },
        {
          "field": "adr_id",
          "type": "integer",
          "description": "ID Фактического адреса"
        }
      ]
    },
    {
      "table": "ca_pd_link",
      "description": "Связи Контрагенттов с Точками доставки",
      "fields": [
        {
          "field": "ca_id",
          "type": "integer",
          "description": "ID контрагента"
        },
        {
          "field": "pd_id",
          "type": "integer",
          "description": "ID контрагента"
        },
        {
          "field": "pd_active",
          "type": "integer",
          "description": "Статус связи"
        }
      ]
    },
    {
      "table": "ca_search",
      "description": "Поисковая строка",
      "fts3": true,
      "fields": [
        {
          "field": "ca_id",
          "type": "integer",
          "description": "ID контрагента",
          "primary_key": true
        },
        {
          "field": "cs_value",
          "type": "text",
          "decription": "Поисковая строка"
        }
      ]
    },
    {
      "table": "price",
      "description": "Цены",
      "fields": [
        {
          "field": "pl_id",
          "type": "integer",
          "description": "ID прайс-листа"
        },
        {
          "field": "i_id",
          "type": "integer",
          "description": "ID номенклатуры"
        },
        {
          "field": "p_cn",
          "type": "integer",
          "description": "Цена номенклатуры"
        },
        {
          "field": "p_date_b",
          "type": "integer",
          "description": "Дата начала действия цены"
        },
        {
          "field": "p_date_e",
          "type": "integer",
          "description": "Дата окончания действия цены"
        }
      ]
    },
    {
      "table": "pricelists",
      "description": "Справочник прайс-листов",
      "fields": [
        {
          "field": "pl_id",
          "type": "integer",
          "description": "ID прайс-листа",
          "primary_key": true
        },
        {
          "field": "pl_name",
          "type": "text",
          "description": "Наименование прайс-листа"
        }
      ]
    },
    {
      "table": "pricelist_link",
      "description": "Связи Составного прайс-листа и Базового прайс-листа",
      "fields": [
        {
          "field": "pll_parent",
          "type": "integer",
          "description": "ID составного прайс-листа"
        },
        {
          "field": "pll_child",
          "type": "integer",
          "description": "ID базового прайс-листа"
        },
        {
          "field": "pll_prior",
          "type": "integer",
          "description": "Чем больше число тем выше приоритет прайс-листа"
        }
      ]
    },
    {
      "table": "coords",
      "description": "Хранение координат",
      "fields": [
        {
          "field": "lat",
          "type": "text",
          "description": "Широта"
        },
        {
          "field": "lon",
          "type": "text",
          "description": "Долгота"
        },
        {
          "field": "atime",
          "type": "integer",
          "description": "Время получения координат"
        },
        {
          "field": "provider",
          "type": "text",
          "description": "Провайдер, который зарегистрировал координаты"
        }
      ]
    },
    {
      "table": "doc",
      "description": "Документов",
      "fields": [
        {
          "field": "d_id",
          "type": "integer",
          "description": "ID Документа",
          "primary_key": true
        },
        {
          "field": "d_num",
          "type": "integer",
          "description": "Номер документа"
        },
        {
          "field": "d_date",
          "type": "integer",
          "description": "Дата документа"
        },
        {
          "field": "d_delivery_date",
          "type": "integer",
          "description": "Дата доставки"
        },
        {
          "field": "ca_id",
          "type": "integer",
          "description": "ID контрагента"
        },
        {
          "field": "pd_id",
          "type": "integer",
          "description": "ID точки доставки"
        },

        {
          "field": "head",
          "type": "text",
          "description": "Заголовок документа",
          "default": "{}"
        },
        {
          "field": "body",
          "type": "text",
          "description": "Содержание документа",
          "default": "{}"
        }
      ]
    },
    {
      "table": "doc_items",
      "description": "Содержимое документов",
      "fields": [
        {
          "field": "d_id",
          "type": "integer",
          "decription": "ID Документа"
        },
        {
          "field": "i_id",
          "type": "integer",
          "description": "ID номенклатуры"
        },
        {
          "field": "iut_id",
          "type": "integer",
          "description": "Единица измерения"
        },
        {
          "field": "kol",
          "type": "integer",
          "description": "Количество в документе"
        },
        {
          "field": "price",
          "type": "integer",
          "description": "Цена"
        },
        {
          "field": "store",
          "type": "integer",
          "description": "Склад"
        }
      ]
    },
    {
      "table": "doc_search",
      "description": "Специальная таблица для поиска документов",
      "fts3": true,
      "fields": [
        {
          "field": "d_id",
          "type": "integer",
          "description": "ID документа",
          "primary_key": true
        },{
          "field": "value",
          "type": "text",
          "description": "Поискова строка"
        }
      ]
    }
  ]
}


